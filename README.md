## JSON-Database
___
Простое клиент-серверное приложение, которое позволяет клиентам хранить свои данные на сервере в формате JSON.
Проект представляет собой CLI-приложение, взаимодействие происходит с помощью командной строки.

При разработке проекта использовались следующие библиотеки:
* [GSON](https://github.com/google/gson) - для работы с данными в формате JSON;
* [JCommander](https://jcommander.org/) - для обработки аргументов командной строки.

### Серверная часть
Сервер хранит базу данных на жестком диске в файле `db.json` и обновляет его только после установки нового значения
(`get`) или удаления данных (`delete`). Файл базы данных хранится в папке `/server/data`.
Сервер является многопоточным, каждый из запросов клиента обрабатывается отдельно с попомщью `ExecutorService`.

Запуск сервера:
```
java Main
Server started!
```

### Клиентская часть
_(прим.)_ - для начала работы клиента необходимо сначала запустить серверную часть приложения.

Аргументы командной строки, передаваемые клиенту для работы с приложением, имеют следующий формат:

`java Main -t set -k 1 -v "Hello world!"`

### Аргументы командной строки
| Команда             | Описание                                     | 
|:--------------------|:---------------------------------------------|
| `-t, --type`        | Тип запроса (`set`, `get`, `delete`)         |
| `-k, --key`         | Ключ для записи в БД                         |
| `-v, --value`       | Значение для записи в БД                     |
| `-in, --input-file` | Имя файла, содержащего запрос в формате JSON |
| `-exit`             | Завершение программы                         |

_(прим.)_ - для передачи на вход файла с запросом в формате JSON необходимо передать в командную строку данные в следующем формате:
`-in /client/data/file.json` (_файл должен храниться в соответствующей директории_).

#### Для добавления невложенного ключа со значением используется команда `set` со следующим форматом запроса:
- `{ "type": "set", "key": "Secret key", "value": "Secret value" }`

Вложенный ключ выглядит следующим образом:
- `{"type":"set","key":["person","thing","characteristic"],"value":"25"}`

Ответ на запрос придет в формате JSON:
- `{ "response": "OK" }`

#### Для получения данных из базы используется команда `get`:
- `{ "type": "get", "key": "Secret key" }`

В случае запроса на получения ключа, который существует в БД, будет отправлен следующий ответ:
- `{ "response": "OK", "value": "Secret value" }`

Если ключ отсутствует, будет отправлено сообщение об ошибке:
- `{ "response": "ERROR", "reason": "No such key" }`

#### Запрос на удаление данных из БД производится с помощью команды `delete`:

- `{ "type": "delete", "key": "Secret key" }`

При любом запросе `delete` вне зависимости от наличия ключа в БД будет получен следующий ответ:
- `{ "response": "OK" }`
